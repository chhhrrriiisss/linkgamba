function selectRandomImage(a){var b=a[Math.floor(Math.random()*a.length)];return b}function drawRouletteWheel(a){options=a,arc=Math.PI/(a.length/2),maxImageWidth=100-5*(a.length-6),maxImageHeight=maxImageWidth;var b=document.getElementById("canvas");if(b.getContext){var c=225,d=80,e=160,f=b.width/2,g=b.height/2;ctx=b.getContext("2d"),ctx.clearRect(0,0,1e3,1e3),ctx.strokeStyle="black",ctx.lineWidth=2,ctx.font="bold 12px Helvetica, Arial";for(var h=0;h<a.length;h++){var i=startAngle+h*arc;angles[h]=i;var j=primaryWheelColour;j=h%2==0?secondaryWheelColour:primaryWheelColour;var k=new Date,l=k.getTime();h==selectedTile&&l%2==0&&(j=highlightWheelColour),ctx.fillStyle=j,ctx.beginPath(),ctx.arc(f,g,c,i,i+arc,!1),ctx.arc(f,g,d,i+arc,i,!0),ctx.stroke(),ctx.fill(),ctx.save(),ctx.shadowOffsetX=-1,ctx.shadowOffsetY=-1,ctx.shadowBlur=0,ctx.shadowColor="rgb(220,220,220)",ctx.fillStyle="black",ctx.translate(f+Math.cos(i+arc/2)*e,g+Math.sin(i+arc/2)*e),ctx.rotate(i+arc/2+Math.PI/2);var m=a[h];ctx.drawImage(m,-maxImageHeight/2,-maxImageWidth/2,maxImageWidth,maxImageHeight),ctx.restore()}}}function spin(){spinAngleStart=10*Math.random()+10,spinTime=0,0==spinTimeTotal?spinTimeTotal=Math.random()*minSpinTime+1e3*spinTimeDif:spinTimeTotal+=Math.random()*minSpinTimeOnPress+1e3*spinTimeDifOnPress,rotateWheel()}function rotateWheel(){if(spinTime+=wheelRotateSpeed,spinTime>=spinTimeTotal)return void stopRotateWheel();var a=spinAngleStart-easeOut(spinTime,0,spinAngleStart,spinTimeTotal);startAngle+=a*Math.PI/180,drawRouletteWheel(options),spinTimeout=setTimeout("rotateWheel()",30)}function highlightTile(){-1!=selectedTile&&(drawRouletteWheel(options),setTimeout("highlightTile()",flickerIntensity))}function stopRotateWheel(){clearTimeout(spinTimeout);var a=180*startAngle/Math.PI+90,b=180*arc/Math.PI,c=Math.floor((360-a%360)/b);ctx.save(),ctx.restore(),selectedTile=c,highlightTile(),setTimeout(function(){window.location.href=selectedImgurLink,selectedTile=-1},timeoutBeforeRedirectInMs),$("#spin").removeAttr("disabled"),spinTimeTotal=0}function easeOut(a,b,c,d){var e=(a/=d)*a,f=e*a;return b+c*(f+-3*e+3*a)}var settings=JSON.parse(localStorage.getItem("linkgamba-settings"));if(null==settings){var settings={};settings.mute=!1,localStorage.setItem("linkgamba-settings",JSON.stringify(settings))}var imgurLinks=[],selectedImgurLink="",options=["default"],angles=[0],startAngle=0,arc=Math.PI/(options.length/2),spinTimeout=null,spinArcStart=10,spinTime=0,spinTimeTotal=0,spinComplete=!1,selectedTile=-1,ctx;$(function(){function a(a){for(var c=0,d=a.length,e=d,c=0,f=0;d>f;f++){var g=new Image;g.id=f,g.onError=function(){e--},g.onload=function(){this.width,this.height;b.push(this),c++,c>=e&&(drawRouletteWheel(b),$("#preloader").fadeOut())},g.src=a[f]}}$.ajax({url:"links.txt",dataType:"text",async:!0,success:function(a){imgurLinks=a.split("\n")}});var b=[];$.ajax({url:emoteDirectory,success:function(b){$(b).find("a:contains(.png)").filter(function(){return $(this)}).each(function(){var a=this.href.replace(window.location.href.replace(/#.*$/,""),"").replace("http://","");g.push(emoteDirectory+a+"?v=3")}),a(g)}});var c=document.createElement("audio");c.setAttribute("src","assets/audio/gamba.mp3");var d=$("#mute-button"),e=$("#spin"),f=!0;setTimeout(function(){f=!1},500);var g=[];e.click(function(a){0!=imgurLinks.length&&($(this).attr("disabled","disabled"),settings.mute||c.play(),spin())}),settings.mute?d.addClass("muted"):d.removeClass("muted"),d.click(function(){settings=JSON.parse(localStorage.getItem("linkgamba-settings",settings)),settings.mute=!settings.mute,localStorage.setItem("linkgamba-settings",JSON.stringify(settings)),settings.mute?$(this).addClass("muted"):$(this).removeClass("muted")})});